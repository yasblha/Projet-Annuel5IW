import{d as T,u as j,f as v,x as L,o as P,c as n,a as t,t as l,j as a,h as i,e as p,n as b,g as _,z as h,l as V,p as w,q as I,m as B,b as r}from"./index-C4yk_1m_.js";const O={class:"min-h-screen bg-gradient-to-br from-blue-50 to-white p-4 md:p-8"},U={class:"max-w-5xl mx-auto"},F={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6"},z={class:"mt-1 text-gray-600"},H={class:"mt-4 md:mt-0 flex gap-3"},$={class:"bg-white rounded-xl shadow-md overflow-hidden"},q={key:0,class:"p-8 flex justify-center"},Y={key:1},G={class:"border-b border-gray-100 p-6"},J={class:"flex flex-col md:flex-row md:justify-between md:items-center"},K={class:"text-xl font-semibold mt-2"},Q={class:"mt-3 md:mt-0 text-right"},W={class:"text-sm text-gray-500"},X={class:"font-mono"},Z={key:0,class:"text-sm text-gray-500"},tt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 p-6"},et={class:"bg-gray-50 p-4 rounded-lg"},st={class:"space-y-2"},ot={class:"flex flex-col sm:flex-row sm:justify-between"},lt={class:"text-sm text-gray-900"},nt={class:"flex flex-col sm:flex-row sm:justify-between"},rt={class:"text-sm text-gray-900"},at={class:"flex flex-col sm:flex-row sm:justify-between"},it={class:"text-sm text-gray-900"},dt={key:0,class:"flex flex-col sm:flex-row sm:justify-between"},ut={class:"text-sm text-gray-900"},ct={key:1,class:"flex flex-col sm:flex-row sm:justify-between"},xt={class:"text-sm text-gray-900"},mt={class:"bg-gray-50 p-4 rounded-lg"},ft={class:"space-y-2"},vt={class:"flex flex-col"},gt={class:"text-sm text-gray-900 mt-1"},yt={key:0,class:"flex flex-col"},pt={class:"text-sm text-gray-900 mt-1"},bt={key:1,class:"flex flex-col"},_t={class:"text-sm text-gray-900 mt-1"},ht={key:0,class:"border-t border-gray-100 p-6"},wt={class:"bg-gray-50 p-4 rounded-lg"},It={class:"space-y-3"},Et={class:"flex flex-col"},kt={class:"text-sm text-gray-900 mt-1"},Ct={key:0,class:"flex flex-col"},Nt={class:"text-sm text-gray-900 mt-1"},At={key:1,class:"flex flex-col"},Rt={class:"text-sm text-gray-900 mt-1"},Dt={key:2,class:"p-8 flex justify-center"},Tt=T({__name:"InterventionDetailView",setup(Mt){const d=j(),E=L(),m=B(),k=v(()=>d.isLoading),s=v(()=>d.getCurrentIntervention),u=v(()=>E.params.id),C=o=>{if(!o)return"";try{return w(new Date(o),"dd MMM yyyy",{locale:I})}catch{return o}},c=o=>{if(!o)return"";try{return w(new Date(o),"dd MMM yyyy à HH:mm",{locale:I})}catch{return o}},f=o=>o?{INSTALLATION:"Installation",REPARATION:"Réparation",RELEVE:"Relevé"}[o]||o:"",g=o=>o?{PLANIFIEE:"Planifiée",EN_COURS:"En cours",TERMINEE:"Terminée",ANNULEE:"Annulée"}[o]||o:"",N=o=>o?{PLANIFIEE:"bg-yellow-100 text-yellow-800",EN_COURS:"bg-blue-100 text-blue-800",TERMINEE:"bg-green-100 text-green-800",ANNULEE:"bg-red-100 text-red-800"}[o]||"bg-gray-100 text-gray-800":"",x=async()=>{try{await d.getInterventionById(u.value)}catch(o){console.error("Erreur lors du chargement de l'intervention:",o)}},A=()=>{m.push("/dashboard/interventions")},R=()=>{m.push(`/dashboard/interventions/${u.value}/edit`)},D=async()=>{try{await d.updateInterventionStatus(u.value,"EN_COURS"),await x()}catch(o){console.error("Erreur lors du démarrage de l'intervention:",o)}},M=()=>{m.push(`/dashboard/interventions/${u.value}/finish`)},S=async()=>{if(confirm("Êtes-vous sûr de vouloir annuler cette intervention ?"))try{await d.cancelIntervention(u.value,"Annulé par l'utilisateur"),await x()}catch(o){console.error("Erreur lors de l'annulation de l'intervention:",o)}};return P(()=>{x()}),(o,e)=>{const y=V("router-link");return r(),n("div",O,[t("div",U,[t("div",F,[t("div",null,[t("div",{class:"flex items-center gap-3"},[t("button",{onClick:A,class:"text-blue-600 hover:text-blue-800"},e[0]||(e[0]=[t("i",{class:"fas fa-arrow-left"},null,-1)])),e[1]||(e[1]=t("h1",{class:"text-2xl font-bold text-blue-800"}," Détails de l'intervention ",-1))]),t("p",z,l(f(s.value?.type))+" - "+l(C(s.value?.datePlanifiee)),1)]),t("div",H,[s.value?.statut==="PLANIFIEE"?(r(),n("button",{key:0,onClick:D,class:"px-4 py-2 rounded bg-green-600 text-white hover:bg-green-700 transition flex items-center gap-2"},e[2]||(e[2]=[t("i",{class:"fas fa-play"},null,-1),i(" Démarrer ")]))):a("",!0),s.value?.statut==="EN_COURS"?(r(),n("button",{key:1,onClick:M,class:"px-4 py-2 rounded bg-blue-600 text-white hover:bg-blue-700 transition flex items-center gap-2"},e[3]||(e[3]=[t("i",{class:"fas fa-check-circle"},null,-1),i(" Terminer ")]))):a("",!0),s.value?.statut==="PLANIFIEE"?(r(),n("button",{key:2,onClick:S,class:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700 transition flex items-center gap-2"},e[4]||(e[4]=[t("i",{class:"fas fa-times-circle"},null,-1),i(" Annuler ")]))):a("",!0),t("button",{onClick:R,class:"px-4 py-2 rounded bg-yellow-600 text-white hover:bg-yellow-700 transition flex items-center gap-2"},e[5]||(e[5]=[t("i",{class:"fas fa-edit"},null,-1),i(" Modifier ")]))])]),t("div",$,[k.value?(r(),n("div",q,e[6]||(e[6]=[p('<div class="flex flex-col items-center"><svg class="animate-spin h-8 w-8 text-blue-600 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg><span class="text-gray-500">Chargement des détails de l&#39;intervention...</span></div>',1)]))):s.value?(r(),n("div",Y,[t("div",G,[t("div",J,[t("div",null,[t("span",{class:b([N(s.value.statut),"text-xs font-semibold px-3 py-1 rounded-full"])},l(g(s.value.statut)),3),t("h2",K,l(f(s.value.type))+" - "+l(c(s.value.datePlanifiee)),1)]),t("div",Q,[t("p",W,[e[7]||(e[7]=i("ID: ")),t("span",X,l(s.value.id),1)]),s.value.dateCreation?(r(),n("p",Z," Créée le "+l(c(s.value.dateCreation)),1)):a("",!0)])])]),t("div",tt,[t("div",et,[e[13]||(e[13]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Informations générales",-1)),t("dl",st,[t("div",ot,[e[8]||(e[8]=t("dt",{class:"text-sm font-medium text-gray-500"},"Type",-1)),t("dd",lt,l(f(s.value.type)),1)]),t("div",nt,[e[9]||(e[9]=t("dt",{class:"text-sm font-medium text-gray-500"},"Statut",-1)),t("dd",rt,l(g(s.value.statut)),1)]),t("div",at,[e[10]||(e[10]=t("dt",{class:"text-sm font-medium text-gray-500"},"Date planifiée",-1)),t("dd",it,l(c(s.value.datePlanifiee)),1)]),s.value.priorite?(r(),n("div",dt,[e[11]||(e[11]=t("dt",{class:"text-sm font-medium text-gray-500"},"Priorité",-1)),t("dd",ut,[t("span",{class:b([{"bg-red-100 text-red-800":s.value.priorite==="HAUTE","bg-yellow-100 text-yellow-800":s.value.priorite==="MOYENNE","bg-blue-100 text-blue-800":s.value.priorite==="BASSE"},"px-2 py-0.5 rounded text-xs font-medium"])},l(s.value.priorite),3)])])):a("",!0),s.value.technicienId?(r(),n("div",ct,[e[12]||(e[12]=t("dt",{class:"text-sm font-medium text-gray-500"},"Technicien",-1)),t("dd",xt,l(s.value.technicienId),1)])):a("",!0)])]),t("div",mt,[e[19]||(e[19]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Détails de la mission",-1)),t("dl",ft,[t("div",vt,[e[14]||(e[14]=t("dt",{class:"text-sm font-medium text-gray-500"},"Description",-1)),t("dd",gt,l(s.value.description||"Aucune description fournie"),1)]),s.value.contratId?(r(),n("div",yt,[e[16]||(e[16]=t("dt",{class:"text-sm font-medium text-gray-500"},"Contrat associé",-1)),t("dd",pt,[_(y,{to:`/dashboard/contrats/${s.value.contratId}`,class:"text-blue-600 hover:text-blue-800"},{default:h(()=>[i(l(s.value.contratId)+" ",1),e[15]||(e[15]=t("i",{class:"fas fa-external-link-alt ml-1 text-xs"},null,-1))]),_:1,__:[15]},8,["to"])])])):a("",!0),s.value.compteurId?(r(),n("div",bt,[e[18]||(e[18]=t("dt",{class:"text-sm font-medium text-gray-500"},"Compteur associé",-1)),t("dd",_t,[_(y,{to:`/dashboard/compteurs/${s.value.compteurId}`,class:"text-blue-600 hover:text-blue-800"},{default:h(()=>[i(l(s.value.compteurId)+" ",1),e[17]||(e[17]=t("i",{class:"fas fa-external-link-alt ml-1 text-xs"},null,-1))]),_:1,__:[17]},8,["to"])])])):a("",!0)])])]),s.value.statut==="TERMINEE"?(r(),n("div",ht,[e[23]||(e[23]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Résultats de l'intervention",-1)),t("div",wt,[t("dl",It,[t("div",Et,[e[20]||(e[20]=t("dt",{class:"text-sm font-medium text-gray-500"},"Résultat",-1)),t("dd",kt,l(s.value.resultat||"Non spécifié"),1)]),s.value.cout!==void 0?(r(),n("div",Ct,[e[21]||(e[21]=t("dt",{class:"text-sm font-medium text-gray-500"},"Coût",-1)),t("dd",Nt,l(s.value.cout)+" €",1)])):a("",!0),s.value.dateFinIntervention?(r(),n("div",At,[e[22]||(e[22]=t("dt",{class:"text-sm font-medium text-gray-500"},"Date de fin",-1)),t("dd",Rt,l(c(s.value.dateFinIntervention)),1)])):a("",!0)])])])):a("",!0),e[24]||(e[24]=p('<div class="border-t border-gray-100 p-6"><h3 class="text-lg font-medium text-gray-900 mb-4">Photos et documents</h3><div class="bg-gray-50 p-4 rounded-lg text-center py-8"><i class="fas fa-images text-gray-400 text-4xl mb-3"></i><p class="text-gray-500">Aucune photo ou document n&#39;a été ajouté à cette intervention</p><button class="mt-3 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"><i class="fas fa-upload mr-2"></i> Ajouter des photos </button></div></div>',1))])):(r(),n("div",Dt,[t("div",{class:"flex flex-col items-center text-red-600"},[e[25]||(e[25]=t("i",{class:"fas fa-exclamation-circle text-3xl mb-2"},null,-1)),e[26]||(e[26]=t("p",null,"Impossible de charger les détails de cette intervention.",-1)),t("button",{onClick:x,class:"mt-3 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"}," Réessayer ")])]))])])])}}});export{Tt as default};
